---
title: "实现游戏角色前后左右移动"
date: 2023-06-11T06:15:39
lastmod: 2023-08-05T22:29:49+08:00
draft: false
weight: 1005
---

## 概览 {#概览}

|      |    | 举例       |
|------|----|----------|
| 轴映射 | 连续 | 前后左右移动 |
| 动作映射 | 离散 | 跳跃，装弹，更换武器 |


## 绑定移动键位 {#绑定移动键位}

`虚幻编辑器` <br/>
`项目设置 > Engine > Input` <br/>
`轴映射` <br/>

| 函数描述    | 键位    | Scale |
|---------|-------|-------|
| MoveRight   | Left/A  | -1    |
|             | Right/D | 1     |
| MoveForward | Up/W    | 1     |
|             | Down/S  | -1    |

<img src="/pic/角色和动画/实现Character前后左右移动/绑定前后左右移动键位/键位.png" width="400" /> <br/> <br/>


## 实现前后左右移动逻辑 {#实现前后左右移动逻辑}

`C++` <br/>

| -        | 回调函数签名               |
|----------|----------------------|
| BindAxis | void handler(float Amount) |

| 函数描述    | 回调函数    | 方向                  | 输入处理         |
|---------|---------|---------------------|--------------|
| MoveForward | MoveForward | GetActorForwardVector | AddMovementInput |
| MoveRight   | MoveRight   | GetActorRightVector   | AddMovementInput |

1.  实现回调函数 <br/>
    `ShootThemUp: Player/STUBaseCharacter.cpp` <br/>
    ```cpp
    #include "Components/InputComponent.h"
    
    void ASTUBaseCharacter::MoveForward(float Amount)
    {
        AddMovementInput(GetActorForwardVector(), Amount);
    }
    
    void ASTUBaseCharacter::MoveRight(float Amount)
    {
        AddMovementInput(GetActorRightVector(), Amount);
    }
    ```
2.  绑定到函数描述 <br/>
    `ShootThemUp: Player/STUBaseCharacter.cpp` <br/>
    ```cpp
    // SetupPlayerInputComponent
    PlayerInputComponent->BindAxis("MoveForward", this, &ASTUBaseCharacter::MoveForward);
    PlayerInputComponent->BindAxis("MoveRight", this, &ASTUBaseCharacter::MoveRight);    
    ```
3.  添加函数声明 <br/>
    `ShootThemUp: Player/STUBaseCharacter.h` <br/>
    -   `private` <br/>
4.  编译ShootThemUp <br/>

