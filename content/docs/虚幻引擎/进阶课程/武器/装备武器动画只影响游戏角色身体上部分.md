---
title: "装备武器动画只影响游戏角色身体上部分"
date: 2023-08-28T21:22:22
lastmod: 2023-08-28T21:22:38+08:00
draft: false
weight: 2019
---

## 说明 {#说明}

1.  向前移动时更换武器, 动画有卡顿 <br/>
2.  当前, 四个方向移动 + 跑步动画的输出 &gt; 瞄准偏移 &gt; 左手固定在枪托 &gt; Slot &gt; 动画蓝图输出 <br/>
3.  卡顿的原因时, 通过Slot拼接动画和动画剪辑时, 动画的姿势被擦除了, 卡顿时, 只有装备武器动画在播放 <br/>
4.  在动画蓝图使用按骨骼分层混合节点, 混合装备武器动画和状态机输出, 只应用于游戏角色上半部分 <br/>


## 概览 {#概览}

-   [X] 在动画蓝图添加游戏角色身体上半部分Slot, 并设置装备武器动画剪辑亦属于该Slot <br/>
-   [X] 在动画蓝图中将状态机输出缓存 <br/>
-   [X] 在动画蓝图中使用按骨骼分层混合节点, 混合装备武器动画和状态机输出, 只应用于游戏角色上半部分 <br/>


## 在动画蓝图添加Slot {#在动画蓝图添加slot}

1.  去到ABP_BaseCharacter &gt; AnimGraph <br/>
2.  添加Slot <br/>
3.  设置 <br/>
    
    | -        |                        |
    |----------|------------------------|
    | SlotName | DefaultGroup.UpperBody |
    
    <img src="/pic/武器/装备武器动画只影响游戏角色上部分/设置Slot.png" width="1200" /> <br/> <br/>


## 设置装备武器动画剪辑分组 {#设置装备武器动画剪辑分组}

1.  打开AM_Equip <br/>
2.  设置 <br/>
    
    | -        |                        |
    |----------|------------------------|
    | SlotName | DefaultGroup.UpperBody |
    
    <img src="/pic/武器/装备武器动画只影响游戏角色上部分/设置AM_Equip的Slot.png" width="600" /> <br/> <br/>


## 添加姿势缓存 {#添加姿势缓存}

`Animation Cache` <br/>

1.  去到ABP_BaseCharacter &gt; AnimGraph <br/>
2.  缓存Locomotion的输出 <br/>
    
    <img src="/pic/武器/装备武器动画只影响游戏角色上部分/添加CachedPose.png" width="600" /> <br/> <br/>
3.  命名为LocomotionCache <br/>
    
    <img src="/pic/武器/装备武器动画只影响游戏角色上部分/LocomotionCache.png" width="1000" /> <br/> <br/>
4.  像使用变量一样使用LocomotionCache, 作为瞄准偏移输入 <br/>
    
    <img src="/pic/武器/装备武器动画只影响游戏角色上部分/使用LocomotionCache.png" width="400" /> <br/> <br/>
    
    <img src="/pic/武器/装备武器动画只影响游戏角色上部分/作为瞄准偏移输入.png" width="600" /> <br/> <br/>


## 使用按骨骼分层混合节点 {#使用按骨骼分层混合节点}

`Layered Blend per Bone` <br/>

1.  去到ABP_BaseCharacter &gt; AnimGraph <br/>
2.  添加节点: 按骨骼分层混合节点 <br/>
    
    <img src="/pic/武器/装备武器动画只影响游戏角色上部分/添加按骨骼分层混合节点.png" width="400" /> <br/> <br/>


### 查看游戏角色骨骼 {#查看游戏角色骨骼}

1.  打开HeroTPP_Skeleton, 去到骨骼树面板 <br/>
2.  b_Spine将身体分为上下两部分 <br/>
    
    <img src="/pic/武器/装备武器动画只影响游戏角色上部分/b_Spine.png" width="1000" /> <br/> <br/>


### 设置节点 {#设置节点}

1.  输入 <br/>
    
    | -           |                  |
    |-------------|------------------|
    | BasePose    | LocomotionCache  |
    | BlendPoses0 | Slot 'UpperBody' |
2.  设置骨骼 <br/>
    -   选中按骨骼分层混合节点 <br/>
    -   去到细节面板 <br/>
        
        <img src="/pic/武器/装备武器动画只影响游戏角色上部分/添加骨骼.png" width="1000" /> <br/> <br/>
    -   设置骨骼为b_Spine <br/>
        
        <img src="/pic/武器/装备武器动画只影响游戏角色上部分/设置为b_Spine.png" width="800" /> <br/> <br/>
3.  输出连接到Slot 'DefaultSlot' <br/>


### 完整实现 {#完整实现}

<img src="/pic/武器/装备武器动画只影响游戏角色上部分/完整实现.png" width="1000" /> <br/> <br/>


## 查看 {#查看}

向前移动时更换武器, 只有身体上半部分动画受影响 <br/>

