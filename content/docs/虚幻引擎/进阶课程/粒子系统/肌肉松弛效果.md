---
title: "肌肉松弛效果"
date: 2023-10-15T17:40:36
lastmod: 2023-10-15T17:41:44+08:00
draft: false
weight: 2006
---

## 说明 {#说明}

`Mesh Relaxation` <br/>
使用游戏角色身体的物理仿真来替换死亡动画, 该技术被称作 `Ragdoll Physics` <br/>

游戏角色骨骼在重力的作用下跌倒 <br/>


## 代码实现 {#代码实现}

`ShootThemUp: Player/STUBaseCharacter.cpp` <br/>

-   检查网格体组件获取 <br/>
    ```cpp
    // BeginPlay
    check(GetMesh());
    ```
-   游戏角色死亡时 <br/>
    -   屏蔽动画播放 <br/>
    -   设置碰撞使能为QueryAndPhysics或者PhysicsOnly <br/>
    -   激活物理仿真 <br/>

<!--listend-->

```cpp
// OnDeath

GetMesh()->SetCollisionEnabled(ECollisionEnabled::QueryAndPhysics);
GetMesh()->SetSimulatePhysics(true);
```

