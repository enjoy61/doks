---
title: "重构和打包"
date: 2023-10-17T19:57:01
lastmod: 2023-10-17T20:26:53+08:00
draft: false
weight: 2012
---

## 移除重叠事件打印 {#移除重叠事件打印}

`BP_STUBaseCharacter` <br/>

<img src="/pic/粒子系统/重构和打包/character-overlap.png" width="1000" /> <br/> <br/>


## 移除装备武器打印 {#移除装备武器打印}

`ABP_BaseCharacter` <br/>

<img src="/pic/粒子系统/重构和打包/remove-equip.png" width="1000" /> <br/> <br/>


## 移除瞄准偏移辅助线 {#移除瞄准偏移辅助线}

`ABP_BaseCharacter` <br/>

<img src="/pic/粒子系统/重构和打包/remove-aim-offset-aid.png" width="1000" /> <br/> <br/>


## 修正榴弹弹痕体积 {#修正榴弹弹痕体积}

`BP_STUProjectile` <br/>

<img src="/pic/粒子系统/重构和打包/projectile-size.png" width="500" /> <br/>      <br/>


## 屏蔽榴弹爆炸范围绘制 {#屏蔽榴弹爆炸范围绘制}

`ShootThemUp: Weapon/STUProjectile.cpp` <br/>


## 创建榴弹爆炸特效 {#创建榴弹爆炸特效}

创建文件夹 `Content/VFX/Projectile` <br/>


### 创建粒子发射器NE_Burst {#创建粒子发射器ne-burst}

使用模板Omnidirectional Burst <br/>

-   `Spawn Burst Instantaneous` <br/>
    
    <img src="/pic/粒子系统/重构和打包/burst-count.png" width="600" /> <br/> <br/>
-   `Initialize Particle` <br/>
    
    <img src="/pic/粒子系统/重构和打包/burst-initial.png" width="600" /> <br/> <br/>
-   添加模块 `Calculate Size and Rotational Inertia by Mass` <br/>
    
    <img src="/pic/粒子系统/重构和打包/burst-add-by-mass.png" width="200" /> <br/> <br/>
-   `Shape Location` <br/>
    
    <img src="/pic/粒子系统/重构和打包/burst-location.png" width="600" /> <br/> <br/>
-   `Scale Color` <br/>
    
    <img src="/pic/粒子系统/重构和打包/burst-scale-color.png" width="600" /> <br/> <br/>
-   添加模块 `Collision` <br/>
    
    <img src="/pic/粒子系统/重构和打包/burst-add-collision.png" width="200" /> <br/> <br/>


### 创建粒子发射器NE_Fireball {#创建粒子发射器ne-fireball}

使用模板Simple Sprite Burst <br/>

-   `Emitter State` <br/>
    
    <img src="/pic/粒子系统/重构和打包/fb-state.png" width="600" /> <br/> <br/>
-   `Spawn Burst Instantaneous` <br/>
    
    <img src="/pic/粒子系统/重构和打包/fb-count.png" width="600" /> <br/> <br/>
-   `Initialize Particle` <br/>
    
    <img src="/pic/粒子系统/重构和打包/fb-initial.png" width="600" /> <br/> <br/>
-   添加模块 `Shape Location` <br/>
    
    <img src="/pic/粒子系统/重构和打包/fb-location.png" width="600" /> <br/> <br/>
-   添加模块 `Drag` <br/>
    
    <img src="/pic/粒子系统/重构和打包/fb-drag.png" width="600" /> <br/> <br/>
-   调整位置 `Solve Forces and Velocity` <br/>
    
    <img src="/pic/粒子系统/重构和打包/fb-sfv.png" width="200" /> <br/> <br/>
-   添加模块 `Sub UVAnimation` <br/>
    消散效果不协调 <br/>
    
    <img src="/pic/粒子系统/重构和打包/fb-uv.png" width="600" /> <br/> <br/>
-   `Scale Color` <br/>
    
    <img src="/pic/粒子系统/重构和打包/fb-scale-color.png" width="600" /> <br/> <br/>
-   `Render` <br/>
    
    <img src="/pic/粒子系统/重构和打包/fb-render.png" width="600" /> <br/> <br/>
-   添加模块 `Add Velocity` <br/>
    无法在 `Particle Update` 添加 <br/>
    
    <img src="/pic/粒子系统/重构和打包/fb-velocity.png" width="600" /> <br/> <br/>


### 创建粒子发射器NE_Flash {#创建粒子发射器ne-flash}

使用模板Simple Sprite Burst <br/>

-   `Emitter State` <br/>
    
    <img src="/pic/粒子系统/重构和打包/f-state.png" width="600" /> <br/> <br/>
-   `Initialize Particle` <br/>
    
    <img src="/pic/粒子系统/重构和打包/f-initial.png" width="600" /> <br/> <br/>
-   取消未使用模块勾选 <br/>
    
    <img src="/pic/粒子系统/重构和打包/f-uncheck.png" width="200" /> <br/> <br/>
-   添加模块 `Scale Sprite Size` <br/>
    
    <img src="/pic/粒子系统/重构和打包/f-scale-size.png" width="600" /> <br/> <br/>
-   `Render` <br/>
    
    <img src="/pic/粒子系统/重构和打包/f-render.png" width="600" /> <br/> <br/>


### 创建粒子发射器NE_Smoke {#创建粒子发射器ne-smoke}

使用模板Simple Sprite Burst <br/>

-   `Emitter State` <br/>
    
    <img src="/pic/粒子系统/重构和打包/s-state.png" width="600" /> <br/> <br/>
-   `Spawn Burst Instantaneous` <br/>
    
    <img src="/pic/粒子系统/重构和打包/s-count.png" width="600" /> <br/> <br/>
-   `Initialize Particle` <br/>
    
    <img src="/pic/粒子系统/重构和打包/s-initial.png" width="600" /> <br/> <br/>
-   添加模块 `Shape Location` <br/>
    
    <img src="/pic/粒子系统/重构和打包/s-location.png" width="600" /> <br/> <br/>
-   添加模块 `Drag` <br/>
    
    <img src="/pic/粒子系统/重构和打包/s-drag.png" width="600" /> <br/> <br/>
-   调整位置 `Solve Forces and Velocity` <br/>
    
    <img src="/pic/粒子系统/重构和打包/s-sfv.png" width="200" /> <br/> <br/>
-   `Scale Color` <br/>
    
    <img src="/pic/粒子系统/重构和打包/s-scale-color.png" width="600" /> <br/> <br/>
-   添加模块 `Sub UVAnimation` <br/>
    
    <img src="/pic/粒子系统/重构和打包/s-uv.png" width="600" /> <br/> <br/>
-   `Render` <br/>
    
    <img src="/pic/粒子系统/重构和打包/s-render.png" width="600" /> <br/> <br/>
-   添加模块 `Add Velocity` <br/>
    无法在 `Particle Update` 添加 <br/>
    
    <img src="/pic/粒子系统/重构和打包/s-velocity.png" width="600" /> <br/> <br/>


### 创建粒子系统NS_ProjectileExplosion {#创建粒子系统ns-projectileexplosion}

使用现有粒子发射器, 有序添加NE_Burst, NE_Fireball, NE_Flash, NE_Smoke <br/>


### 配置榴弹使用 {#配置榴弹使用}

<img src="/pic/粒子系统/重构和打包/projectile-explosion.png" width="300" /> <br/> <br/>

效果很不理想, 有待调整 <br/>


## 创建撞击特效 {#创建撞击特效}

创建文件夹 `Content/VFX/Impacts` <br/>


### 创建粒子发射器NE_BurstOut {#创建粒子发射器ne-burstout}

使用模板Directional Burst <br/>

<img src="/pic/粒子系统/重构和打包/bo-1.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/bo-2.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/bo-3.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/bo-4.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/bo-5.png" width="300" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/bo-6.png" width="600" /> <br/>       <br/>


### 创建粒子发射器NE_CoreFast {#创建粒子发射器ne-corefast}

使用模板Simple Sprite Burst <br/>

<img src="/pic/粒子系统/重构和打包/cf-1.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/cf-2.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/cf-3.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/cf-4.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/cf-5.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/cf-6.png" width="200" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/cf-7.png" width="600" /> <br/> <br/>


### 创建粒子发射器NE_ShortBurst1 {#创建粒子发射器ne-shortburst1}

使用模板Simple Sprite Burst <br/>

<img src="/pic/粒子系统/重构和打包/sb1-1.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/sb1-2.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/sb1-3.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/sb1-4.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/sb1-5.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/sb1-6.png" width="200" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/sb1-7.png" width="600" /> <br/> <br/>


### 创建粒子发射器NE_ShortBurst2 {#创建粒子发射器ne-shortburst2}

使用模板Simple Sprite Burst <br/>

<img src="/pic/粒子系统/重构和打包/sb2-1.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/sb2-2.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/sb2-3.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/sb2-4.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/sb2-5.png" width="600" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/sb2-6.png" width="300" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/sb2-7.png" width="600" /> <br/> <br/>


### 创建粒子系统NS_RifleDefaultImpact {#创建粒子系统ns-rifledefaultimpact}

子弹射击金属的效果 <br/>

创建空的粒子系统 <br/>

依次添加NE_ShortBurst1和NE_ShortBurst2: 烟雾效果 <br/>

添加两个NE_CoreFast, 分别命名为NE_CoreFastOrange, NE_CoreFastBlue; 修改NE_CoreFastBlue颜色 <br/>

<img src="/pic/粒子系统/重构和打包/body-impact-core-fast-blue.png" width="1000" /> <br/> <br/>

添加NE_LauncherFlash和NE_BurstOut <br/>


### 创建粒子系统NS_RifleGroundImpact {#创建粒子系统ns-riflegroundimpact}

拷贝NS_RifleDefaultImpact改名 <br/>


### 创建粒子系统NS_RifleBodyImpact {#创建粒子系统ns-riflebodyimpact}

拷贝NS_RifleDefaultImpact改名, NE_BurstOut粒子数增加为40 <br/>

<img src="/pic/粒子系统/重构和打包/body-40.png" width="600" /> <br/> <br/>


### 创建粒子系统NS_RifleHeadImpact {#创建粒子系统ns-rifleheadimpact}

拷贝NS_RifleDefaultImpact改名 <br/>

增加NE_BurstOut粒子数 <br/>

<img src="/pic/粒子系统/重构和打包/head-120.png" width="600" /> <br/> <br/>

修改NE_BurstOut粒子颜色 <br/>

<img src="/pic/粒子系统/重构和打包/head-red.png" width="600" /> <br/> <br/>


### 设置步枪击中特效的默认类型和映射 {#设置步枪击中特效的默认类型和映射}

<img src="/pic/粒子系统/重构和打包/rifle-default-impact.png" width="700" /> <br/> <br/>

<img src="/pic/粒子系统/重构和打包/rifle-impact-map.png" width="700" /> <br/> <br/>


## 移动旧资产 {#移动旧资产}

创建文件夹 `Content/VFX/Dev` <br/>
将PS_Test, NE_BaseImpact移动到Dev目录下 <br/>

将NS_DefaultImpact, NS_GroundImpact, NS_BodyImpact和NS_HeadImpact移动到Dev目录下 <br/>

将NS_ProjectileImpact移动到Projectile目录下 <br/>


## 打包游戏 {#打包游戏}

